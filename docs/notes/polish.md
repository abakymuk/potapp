# Project Polish & Hardening

## Что делает S-00.7

S-00.7 - это финальный "гигиена"-проход по всем предыдущим тикетам (S-00.1...S-00.6), который добавляет:

- ✅ Единые скрипты проверок `check:*`
- ✅ Аудит переменных окружения
- ✅ Настройки редактора (VSCode)
- ✅ Документацию и README
- ✅ Проверки безопасности (RLS)
- ✅ Автоматическое форматирование

## Команды

### Основные проверки

```bash
# Быстрые проверки
pnpm check:fast

# Все проверки
pnpm check:all

# Автоматическое исправление
pnpm polish:write
```

### Компоненты check:all

1. **check:fast** - format:check, lint, typecheck
2. **check:build** - сборка всех пакетов
3. **check:env** - аудит переменных окружения
4. **check:rls** - проверка RLS изоляции

## RLS проверки

Для работы `pnpm check:rls` нужны тестовые токены:

```bash
# Добавьте в .env
TEST_TENANT1_TOKEN=eyJxxx
TEST_TENANT2_TOKEN=eyJxxx
```

Скрипт проверяет, что пользователи разных тенантов не видят данные друг друга.

## Env Matrix

Сравнение переменных окружения между платформами хранится в `/docs/notes/env-matrix.md`.

## CI интеграция

CI из S-00.3 должен запускать минимум `pnpm check:fast`. Можно расширить до `pnpm check:all` позже.
